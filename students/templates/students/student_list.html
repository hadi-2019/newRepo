{% extends 'main.html' %}
{% load static %}
{% block content %}
<style>
    .clickable-row{
        cursor: pointer;
    }
    .clickable-row:hover{
        background-color: lightgray;
    }
</style> 
<div class="site-content">
    <!-- Content -->
    <div class="content-area py-1">
        <div class="container-fluid">
            <h4>لیست شاگردان</h4>
            <ol class="breadcrumb no-bg mb-1">
                <li class="breadcrumb-item"><a href="#">داشبورد</a></li>
                <li class="breadcrumb-item active">لیست شاگردان</li>
            </ol>
            <div class="box box-block bg-white">
                <a href="{% url 'student-create' %}" class="btn btn-info" style="border-radius: 10px;"> <span style="font-size: 17px;"> ثبت محصل جدید </span> <i class="fa fa-plus ml-1" style="font-size: 18px;"></i> </a>
                <button class="btn btn-success ml-1" style="border-radius: 10px;"> <span style="font-size: 17px;">لیست محصلین </span> <i class="fa fa-upload ml-1" style="font-size: 18px;"></i> </button>
                <br>

                <br>
                <table class="table table-striped table-bordered dataTable" id="table-1">
                    <thead>
                        <tr>
                            <th>آی دی محصل</th>
                            <th>نام کامل</th>
                            <th>نام پدر</th>
                            <th>ولدیت</th>
                            <th>ملیت</th>
                            <th>زبان مادری</th>
                            <th>عکس</th>
                        </tr>
                    </thead> 
                    <tbody>
                        {% for student in students %}
                            <tr class="clickable-row" data-href="{% url 'student-detail' student.id %}">
                                <td> {{ student.kankor_id }} </td>
                                <td> {{ student.first_name }} - {{ student.last_name }} </td>
                                <td> {{ student.father_name }} </td>
                                <td> {{ student.grand_father_name }} </td>
                                <td> {{ student.nationality }} </td>
                                <td> {{ student.main_language }} </td>
                                <td>
                                        <img src="{% static 'img/teacher/student_male.jpg' %}" alt="" style="width: 50px; height: 50px; border-radius: 50%;">
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>                   
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const rows = document.querySelectorAll("tr[data-href]");
        rows.forEach(row => {
            row.addEventListener("click", () => {
                window.location.href = row.dataset.href
            })
        })
    })
</script>

{% endblock content %}